<!DOCTYPE html><html lang=en><script type=importmap>{"imports":{"g5kKs":"./worker.ee140066.js"}}</script><meta charset=utf-8><meta name=viewport content="width=device-width, initial-scale=1, shrink-to-fit=no"><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css integrity=sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB crossorigin=anonymous><title>OpenCPN harmonic file generator.</title><style>.accordion-button.collapsed{background:gray}</style><body>
    
    
    <script src=https://code.jquery.com/jquery-3.2.1.slim.min.js integrity=sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN crossorigin=anonymous></script>
    <script src=https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js integrity=sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q crossorigin=anonymous></script>
    <script src=https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.min.js integrity=sha384-G/EV+4j2dNv+tEPo3++6LCgdCROaejBqfUeNjuKAiuXbjrxilcCdDz6ZAVfHWe1Y crossorigin=anonymous></script>

    <div class="border container sticky-top text-bg-light">
      <div class="btn-group menu" role=group></div>
    </div>

    <div id=page-loading class=d-none>
      <div class=container>
        <h1>OpenCPN harmonic file generator.</h1>
        <h4 title=sw_version></h4>
        <hr class=my-4>
        <p class=lead>Loading data...</p>
        <p class=lead>
          There's a lot of data to read. It may take a minute or two, depending
          on your computer...
        </p>
      </div>
    </div>

    <div id=page-info class=d-none>
      <div class=container>
        <h1>OpenCPN harmonic file generator.</h1>
        <h4 title=sw_version class=text-body-secondary></h4>
        <hr class=my-4>
        <p class=lead>
          This webapp generates configuration files for
          <a href=https://opencpn.org/>OpenCPN</a>, the "Concise and robust
          Chart Plotter Navigation software".<br>
          Specifically it generates harmonic files to provide OpenCPN with the
          necessary tidal constituents to predict tidal height information at
          specific tidal stations around the world.<br>
          If you don't know about OpenCPN, this page won't be of much use to
          you. I recommend you look at the
          <a href=https://opencpn.org/>OpenCPN</a> website instead.
        </p>
        <p class=lead>
          The
          <a href="https://opencpn.org/wiki/dokuwiki/doku.php?id=opencpn:manual_advanced:techniques:tid" title="Tide &amp; Current">
            official OpenCPN documentation
          </a>
          is fairly terse on the matter of the harmonics files but there is more
          detail in various forums online. I believe OpenCPN used to ship with
          the required tidal constituents for much of the globe but due to the
          copyright holders in various geographic regions rescinding permissions
          for the previously freely available data sets, the software
          maintainers were forced to remove it from the downloads.
        </p>
        <p class=lead>
          This project instead uses online data sets. Eg: the
          <a href=https://www.seanoe.org/data/00980/109129/>TICON-4</a> data
          set contains data on 4838 tidal stations across 116 countries at the
          time of writing. It's published under a Creative Commons licence so
          decide for your self if your use case is compatible with their legal
          requirements. There is also a TICON-4 User Manual which describes the
          data layout.
        </p>
        <p class=lead>
          You'll need to download such a data set to your local device before
          making use of this app.
        </p>
        <p class=lead>
          The data is far from perfect. Multiple entries appear for many stations.
          Only the first station that OpenCPN finds in the file for each Lon/Lat
          position will be displayed. Also positions are not always correct.<br>
          This web-app attempts to calculate the Lowest Astronomical Tide to use
          as a datum point for each station. This will not always match published
          chart datum for your region and datum results are completely incorrect
          for some stations.<br>
          <strong>In summary: Verify location, height and timing of all tidal
            stations calculated by this app.</strong>
        </p>
        <hr class=my-4>
        <p class=lead>
          The
          <a href=https://www.seanoe.org/data/00980/109129/>TICON-4</a>
          authors:
        </p>
        <p>
          Hart-Davis Michael, Dettmering Denise, Seitz Florian (2025). TICON-4:
          TIdal CONstants based on GESLA-4 sea-level records. SEANOE.<br>
          <a href=https://doi.org/10.17882/109129>https://doi.org/10.17882/109129</a>
        </p>
        <p>
          Piccioni Gaia, Dettmering Denise, Bosch Wolfgang, Seitz Florian
          (2019). TICON: TIdal CONstants based on GESLA sea-level records from
          globally located tide gauges. Geoscience Data Journal. 6 (2).
          97-104.<br>
          <a href=https://doi.org/10.1002/gdj3.72>https://doi.org/10.1002/gdj3.72,</a><br>
          <a href=https://archimer.ifremer.fr/doc/00838/94993/>https://archimer.ifremer.fr/doc/00838/94993/</a>
        </p>

        <hr class=my-4>
        <a class="btn btn-lg btn-primary" href=#page-import role=button>Import</a>
      </div>
    </div>

    <div id=page-import class=d-none>
      <div class=container>
        <div class=accordion id=selectDataSource>
          <div class=accordion-item>
            <h2 class=accordion-header>
              <button class=accordion-button type=button data-bs-toggle=collapse data-bs-target=#dataSourceDefault aria-expanded=true aria-controls=dataSourceDefault>
                <strong>Default.</strong>&nbsp;Use TICON-4 data embedded in this
                project.
              </button>
            </h2>
            <div id=dataSourceDefault class="accordion-collapse collapse show" data-bs-parent=#selectDataSource>
              <div class=accordion-body>
                <p>Use the following built in data files:</p>
                <div id=form-check></div>
              </div>
            </div>
          </div>

          <div class=accordion-item>
            <h2 class=accordion-header>
              <button class="accordion-button collapsed" type=button data-bs-toggle=collapse data-bs-target=#dataSourceManual aria-expanded=false aria-controls=dataSourceManual>
                <strong>Advanced.</strong>&nbsp;Use local data files.
              </button>
            </h2>
            <div id=dataSourceManual class="accordion-collapse collapse" data-bs-parent=#selectDataSource>
              <div class=accordion-body>
                <div class=container>
                  <p class=lead>
                    If choosing this option you'll need a data file of tidal
                    harmonic constituents downloaded to your local device and
                    formatted into a suitable structure.
                  </p>
                  <p class=lead>
                    The required format is the same as the
                    <a href=https://www.seanoe.org/data/00980/109129/>TICON-4</a>
                    data set. Providing future versions of TICON data use the
                    same format, it should be possible to manually provide
                    future versions using this option.
                  </p>
                  <p class=lead>
                    If the "tide_gauge_name" field in your data set is not
                    optimized for human readability, a metadata file can also be
                    provided to map the name in the harmonic constituents file
                    to a human readable one. The expected file format matches
                    the
                    <a href=https://gesla787883612.wordpress.com/downloads/>GESLA</a>
                    data that TICON-4 is based on. Look at "GESLA-4 CSV
                    META-DATA FILE" for an example.
                  </p>
                </div>
                <div class=container>
                  <div class="justify-content-lg-center row">
                    <div class=col-lg-6>
                      <div class=card>
                        <div class=card-body>
                          <h5 class=card-title>
                            Main data file(s) (Required)
                          </h5>
                          <h6 class="card-subtitle mb-2 text-muted">
                            Main .csv file containing tidal station harmonic
                            constituents.<br>
                            Expected to be in the same format as the TICON-4
                            data set.<br>
                            If multiple files are selected, it is assumed they
                            contain different stations and all will be used.
                          </h6>
                          <div class=card-text>
                            <div id=imported-harmonic-files>
                              <div class="border row">
                                <div class=col-3>
                                  <input type=file id=select-harmonic-file name=select-harmonic-file accept=.csv class=d-none>
                                  <label for=select-harmonic-file id=select-harmonic-file-label class="btn btn-primary btn-sm">Add file</label>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class=col-lg-6>
                      <div class=card>
                        <div class=card-body>
                          <h5 class=card-title>
                            Meta data file(s). (Optional)
                          </h5>
                          <h6 class="card-subtitle mb-2 text-muted">
                            Meta-data .csv file containing improved name
                            mapping.<br>
                            Expected to be in the same format as the "GESLA-4
                            CSV META-DATA FILE".<br>
                            If multiple files are selected, it is assumed they
                            contain different stations and all will be used.
                          </h6>
                          <div id=imported-metadata-files>
                            <div class="border row">
                              <div class=col-3>
                                <input type=file id=select-metadata-file name=select-metadata-file accept=.csv class=d-none>
                                <label for=select-metadata-file id=select-metadata-file-label class="btn btn-primary btn-sm">Add file</label>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id=page-config class=d-none>
      <div class=container>
        <div class="justify-content-lg-center row">
          <div class=col-lg-12>
            <div class=card>
              <div class=card-body>
                Configuration settings for generating your Harmonics files.
              </div>
            </div>
          </div>
        </div>
        <div class="justify-content-lg-center row">
          <div class=col-lg-6>
            <div class=card>
              <div class=card-body>
                <h5 class=card-title>Timezones</h5>
                <h6 class="card-subtitle mb-2 text-muted">
                  Select whether you want times in your tide tables to default
                  to the local timezones for each country or all be set to a
                  single timezone.
                </h6>
                <div class=card-text>
                  <fieldset class=form-group id=time-strategy>
                    <div class=form-check>
                      <input class=form-check-input type=radio id=time-strategy-local name=time-strategy value=local checked>
                      <label class=form-check-label for=time-strategy-local>
                        Set each of tidal station to their countries
                        timezone.<br>
                        <b>Note:</b> This option will only work for countries
                        with a single timezone.
                      </label>
                    </div>
                    <div class=form-check>
                      <input class=form-check-input type=radio id=time-strategy-global name=time-strategy value=global>
                      <label class=form-check-label for=time-strategy-global>Set all tidal stations to a single timezone.</label>
                    </div>
                  </fieldset>
                </div>
                <select id=timezone name=timezone disabled>
                  <option value=-12:00>UTC -12:00</option>
                  <option value=-11:00>UTC -11:00</option>
                  <option value=-9:30>UTC -9:30</option>
                  <option value=-9:00>UTC -9:00</option>
                  <option value=-8:00>UTC -8:00</option>
                  <option value=-7:00>UTC -7:00</option>
                  <option value=-6:00>UTC -6:00</option>
                  <option value=-5:00>UTC -5:00</option>
                  <option value=-4:00>UTC -4:00</option>
                  <option value=-3:30>UTC -3:30</option>
                  <option value=-3:00>UTC -3:00</option>
                  <option value=-2:00>UTC -2:00</option>
                  <option value=-1:00>UTC -1:00</option>
                  <option value=0:00 selected>UTC +0:00</option>
                  <option value=1:00>UTC +1:00</option>
                  <option value=2:00>UTC +2:00</option>
                  <option value=3:00>UTC +3:00</option>
                  <option value=3:30>UTC +3:30</option>
                  <option value=4:00>UTC +4:00</option>
                  <option value=4:30>UTC +4:30</option>
                  <option value=5:00>UTC +5:00</option>
                  <option value=5:30>UTC +5:30</option>
                  <option value=5:45>UTC +5:45</option>
                  <option value=6:00>UTC +6:00</option>
                  <option value=6:30>UTC +6:30</option>
                  <option value=7:00>UTC +7:00</option>
                  <option value=8:00>UTC +8:00</option>
                  <option value=8:45>UTC +8:45</option>
                  <option value=9:00>UTC +9:00</option>
                  <option value=9:30>UTC +9:30</option>
                  <option value=10:00>UTC +10:00</option>
                  <option value=10:30>UTC +10:30</option>
                  <option value=11:00>UTC +11:00</option>
                  <option value=12:00>UTC +12:00</option>
                  <option value=12:45>UTC +12:45</option>
                  <option value=13:00>UTC +14:00</option>
                  <option value=14:00>UTC +14:00</option>
                </select>
              </div>
            </div>
          </div>
          <div class=col-lg-6>
            <div class=card>
              <div class=card-body>
                <h5 class=card-title>Select Countries</h5>
                <h6 class="card-subtitle mb-2 text-muted">
                  Select the Regions, Sub-Regions or Countries you with to
                  generate Harmonics files for.<br>
                  Clicking on a Region or Sub-Region will automatically
                  select/deselect all Countries within that Region or
                  Sub-Region.<br>
                  Clicking on an individual Country will select/deselect that
                  Country.<br>
                </h6>
              </div>
              <div id=regions>Loading data...</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id=page-summary class=d-none>
      <div class=card>
        <div class=card-body>
          <h5 class=card-title>Summary</h5>
          <h6 class="card-subtitle mb-2 text-muted">
            Look over the selected countries below.<br>
            If changes are required, click back to the
            <a href=#page-config class="btn btn-primary btn-sm">Configuration</a>
            section and make changes.<br>
            If all looks good, proceed to
            <a href=#page-download class="btn btn-primary btn-sm">Downloads</a>.
          </h6>
        </div>
      </div>
      <div id=report class=container>
        <div class="bg-dark-subtle border row">
          <div class=col-1>Region</div>
          <div class=col-2>Sub-Region</div>
          <div class=col-3>Country</div>
          <div class=col-3>Count</div>
          <div class=col-1>timezone</div>
        </div>
      </div>
    </div>

    <div id=page-download class=d-none>
      <div class=card>
        <div class=card-body>
          <h5 class=card-title>Downloads</h5>
          <p>
            Clicking the button below will download the HARMONICS and
            HARMONICS.idx files to your browser's Downloads directory.
          </p>
          <p>
            You many not be notified by your browser so check the Downloads
            directory after clicking the button.
          </p>
          <a id=download-now class="btn btn-primary btn-sm">Download</a>
        </div>
      </div>
    </div>

    <div id=app></div>

    <div class="fade modal" id=warningModal tabindex=-1 aria-labelledby=warningModalLabel aria-hidden=true>
      <div class=modal-dialog>
        <div class=modal-content>
          <div class="bg-warning-subtle modal-header">
            <h1 class="fs-5 modal-title" id=warningModalLabel>Warning</h1>
            <button type=button class=btn-close data-bs-dismiss=modal aria-label=Close></button>
          </div>
          <div class=modal-body>Problems found.</div>
          <div class=modal-footer>
            <button type=button class="btn btn-secondary" data-bs-dismiss=modal>
              Close
            </button>
          </div>
        </div>
      </div>
    </div>

    <script type=module src=OpenCPN_harmonics_chooser.a81dce6c.js></script>
  

